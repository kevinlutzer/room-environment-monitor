#include "freertos/tasks.h"

#include <Wire.h>
#include <Adafruit_BME280.h>

#define SEALEVELPRESSURE_HPA (1013.25)

Adafruit_BME280 bme; // I2C

/*
DATA
Sat Oct 14 16:44:24 2023   b'\x16'
Sat Oct 14 16:44:24 2023   b'\x11'
Sat Oct 14 16:44:24 2023   b'\x0b'
Sat Oct 14 16:44:24 2023   b'\x00'
Sat Oct 14 16:44:24 2023   b'\x00'
Sat Oct 14 16:44:24 2023   b'\x00'
Sat Oct 14 16:44:24 2023   b'\x04'
Sat Oct 14 16:44:24 2023   b'\x00'
Sat Oct 14 16:44:24 2023   b'\x00'
Sat Oct 14 16:44:24 2023   b'\x02'
Sat Oct 14 16:44:24 2023   b'B'
Sat Oct 14 16:44:24 2023   b'\x00'
Sat Oct 14 16:44:24 2023   b'\x00'
Sat Oct 14 16:44:24 2023   b'\x00'
Sat Oct 14 16:44:24 2023   b'x'
Sat Oct 14 16:44:24 2023   b'\x02'
Sat Oct 14 16:44:24 2023   b'\x00'
Sat Oct 14 16:44:24 2023   b'\x00'
Sat Oct 14 16:44:24 2023   b'\x0c'
Sat Oct 14 16:44:24 2023   b'\x00'

SEND:

Sat Oct 14 16:46:13 2023   b'\x11'
Sat Oct 14 16:46:13 2023   b'\x02'
Sat Oct 14 16:46:13 2023   b'\x0b'
Sat Oct 14 16:46:13 2023   b'\x01'
Sat Oct 14 16:46:13 2023   b'\xe1'
*/

void setup()
{
  Serial.begin(9600);
  Serial1.begin(115200,SERIAL_8N1, 4,5, true); //int8_t rxPin=4, int8_t txPin=5

  for (int i=0; i<10; i++) Serial.println(i);

  while(true) {
    Serial.println("Writing and Reading Data: \n");

    uint8_t data[5] = {0x11, 0x02, 0x0B, 0x01, 0xE1};
    Serial1.write(data, 5);

    uint8_t result_len = 100;
    uint8_t result[result_len]; // = (uint8_t * )calloc(result_len, sizeof(result));
    while(!Serial1.available());
    Serial1.readBytes(result, result_len);
    Serial1.flush();
  
    time.sleep(1);

    Serial.println("Results: \n");

    for (int i=0; i<result_len; i++) {
      Serial.print(result[i], HEX);
      Serial.println();
    };

    Serial.println("");
  }

  delay(1000);

}

void loop(){}


#include "pm1006.hpp"

#define DEBUG_PM1006

PM1006 *pm1006; 

void setup() {
  pm1006 = new PM1006(&Serial1, 4, 5); 
  pm1006->begin();
  Serial.begin(115200);
  Serial.println("Hello World");
}

void loop() {
  delay(1000);
  int value = pm1006->read();
  Serial.print("Value: ");
  Serial.print(value);
  Serial.print("\n");
}

#include "Adafruit_NeoPixel.h"


// How many internal neopixels do we have? some boards have more than one!
#define NUMPIXELS        3
#define PIN_NEOPIXEL 8

Adafruit_NeoPixel pixels(NUMPIXELS, PIN_NEOPIXEL, NEO_GRB + NEO_KHZ800);

// the setup routine runs once when you press reset:
void setup() {
  Serial.begin(115200);

  pixels.begin(); // INITIALIZE NeoPixel strip object (REQUIRED)
  pixels.setBrightness(20); // not so bright
}

// the loop routine runs over and over again forever:
void loop() {
  // say hi
  Serial.println("Hello!");
  
  // set color to red
  pixels.fill(0xFF0000);
  pixels.show();
  delay(500); // wait half a second

  // turn off
  pixels.fill(0x000000);
  pixels.show();
  delay(500); // wait half a second
}
